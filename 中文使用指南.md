# Neovim 配置中文使用指南

## ⚠️ 重要：解决 "Vim 模式失效" 问题

如果你打开文件后发现 **Vim 模式失效**（无法使用 hjkl 移动，按键没反应等），请检查：

### 问题：你用错了命令！

**❌ 错误：** 使用 `vim` 命令
```bash
vim file.txt  # 这会打开传统的 Vim，不会加载 Neovim 配置！
```

**✅ 正确：** 使用 `nvim` 命令
```bash
nvim file.txt  # 这才会使用 Neovim 配置
```

## 快速开始

### 1. 安装 Neovim

```bash
# Ubuntu/Debian
sudo apt install neovim

# macOS
brew install neovim

# 推荐版本：Neovim 0.9.0+
```

### 2. 安装此配置

配置已经自动链接到 `~/.config/nvim/`，直接使用即可！

### 3. 启动 Neovim

```bash
nvim
```

第一次启动会自动安装插件，等待 1-2 分钟。

## 核心功能

### 🚀 已配置功能

- **插件管理器**：lazy.nvim
- **LSP 支持**：Python、Lua、TypeScript、JavaScript 等
- **智能补全**：nvim-cmp
- **AI 补全**：Codeium（免费）
- **文件浏览**：nvim-tree
- **模糊查找**：Telescope
- **语法高亮**：Treesitter
- **Git 集成**：gitsigns

## 常用快捷键

> Leader 键是 `<Space>`（空格键）

### 基本操作

| 快捷键 | 功能 |
|--------|------|
| `<Space>w` | 保存文件 |
| `<Space>q` | 退出 |
| `jk` | 退出插入模式（替代 Esc） |

### 文件操作

| 快捷键 | 功能 |
|--------|------|
| `<Space>e` | 打开/关闭文件树 |
| `<Space>ff` | 查找文件 |
| `<Space>fs` | 搜索内容 |
| `<Space>fr` | 最近文件 |
| `<Space>fb` | 缓冲区列表 |

### 代码导航（LSP）

| 快捷键 | 功能 |
|--------|------|
| `K` | 显示文档 |
| `gd` | 跳转到定义 |
| `gr` | 显示引用 |
| `<Space>ca` | 代码操作 |
| `<Space>rn` | 重命名 |
| `[d` / `]d` | 上/下一个诊断 |

### 窗口管理

| 快捷键 | 功能 |
|--------|------|
| `<C-h/j/k/l>` | 窗口导航（左/下/上/右） |
| `<Space>sv` | 垂直分割 |
| `<Space>sh` | 水平分割 |

### 缓冲区

| 快捷键 | 功能 |
|--------|------|
| `<S-h>` / `<S-l>` | 上/下一个缓冲区 |
| `<Space>bd` | 删除缓冲区 |

### 注释

| 快捷键 | 功能 |
|--------|------|
| `gcc` | 切换当前行注释 |
| `gc` + 移动 | 注释多行 |
| 可视模式 `gc` | 注释选中内容 |

### AI 补全（Codeium）

| 快捷键 | 功能 |
|--------|------|
| `<C-g>` | 接受建议 |
| `<C-]>` / `<C-[>` | 下/上一个建议 |
| `<C-x>` | 清除建议 |

## 必需依赖

```bash
# macOS
brew install neovim git python3 node ripgrep fd

# Ubuntu/Debian
sudo apt install neovim git python3 python3-pip nodejs npm ripgrep fd-find build-essential

# Arch Linux
sudo pacman -S neovim git python python-pip nodejs npm ripgrep fd base-devel
```

## 插件管理

### 安装/更新插件

```vim
:Lazy sync    # 同步所有插件
:Lazy update  # 更新插件
:Lazy clean   # 清理未使用的插件
```

### 安装 LSP 服务器

```vim
:Mason        # 打开 Mason 管理器
# 按 'i' 安装，'u' 更新，'X' 卸载
```

常用 LSP 服务器：
- `pyright` - Python
- `lua_ls` - Lua
- `ts_ls` - TypeScript/JavaScript
- `html` - HTML
- `cssls` - CSS
- `jdtls` - Java

### 配置 AI 补全

```vim
:Codeium Auth
# 按照浏览器提示完成认证（免费）
```

## 常见问题

### Q1: Vim 模式失效？

**A:** 你用了 `vim` 而不是 `nvim`！

- **传统 Vim**：`vim` 命令，配置在 `~/.vimrc`
- **Neovim**：`nvim` 命令，配置在 `~/.config/nvim/`

**解决：** 使用 `nvim` 命令打开文件。

### Q2: 插件没加载？

```vim
:Lazy sync    # 同步插件
:checkhealth  # 检查健康状态
```

### Q3: LSP 不工作？

```vim
:Mason        # 安装需要的 LSP 服务器
:LspInfo      # 查看 LSP 状态
```

### Q4: Telescope 搜索不工作？

确保安装了 ripgrep：
```bash
sudo apt install ripgrep    # Ubuntu
brew install ripgrep         # macOS
```

### Q5: 文件树没图标？

安装 Nerd Font 字体：
1. 下载：https://www.nerdfonts.com/
2. 推荐：JetBrains Mono Nerd Font、FiraCode Nerd Font
3. 在终端设置中使用

### Q6: 配色异常？

确保终端支持真彩色：
```bash
export TERM=xterm-256color
# 添加到 ~/.bashrc 或 ~/.zshrc
```

## Vim 基础操作速查

### 模式切换

- `Esc` 或 `jk` → 普通模式
- `i` → 光标前插入
- `a` → 光标后插入
- `o` → 下方新建行
- `O` → 上方新建行
- `v` → 可视模式（字符）
- `V` → 可视模式（行）
- `<C-v>` → 可视块模式

### 移动

```
hjkl          - 左下上右
w / b / e     - 单词移动
0 / ^ / $     - 行首/首个字符/行尾
gg / G        - 文件首/尾
:n            - 跳转到第 n 行
<C-d> / <C-u> - 半页下/上
```

### 编辑

```
dd            - 删除行
yy            - 复制行
p / P         - 粘贴（后/前）
u             - 撤销
<C-r>         - 重做
x             - 删除字符
dw / de       - 删除单词
ciw           - 修改单词
ci" / ci{     - 修改引号/括号内容
```

### 搜索

```
/pattern      - 向下搜索
?pattern      - 向上搜索
n / N         - 下/上一个匹配
*             - 搜索当前单词
```

### 保存退出

```
:w            - 保存
:q            - 退出
:wq 或 :x     - 保存并退出
:q!           - 强制退出不保存
```

## 学习资源

### 入门教程

1. **vimtutor** - 内置教程（强烈推荐！）
   ```bash
   vimtutor
   ```
   30 分钟掌握基础操作。

2. **OpenVim** - 在线交互教程
   https://www.openvim.com/

3. **Vim Adventures** - 游戏化学习
   https://vim-adventures.com/

### 进阶资源

- **《Practical Vim》** - Drew Neil 著
- **ThePrimeagen** - YouTube Vim 教程
- **Neovim 官方文档** - https://neovim.io/doc/

## 配置结构

```
nvim-config/
├── init.lua              # 入口文件
├── lua/
│   ├── core/
│   │   ├── options.lua   # 选项配置
│   │   └── keymaps.lua   # 键位映射
│   └── plugins/
│       ├── init.lua      # 插件列表
│       ├── lsp.lua       # LSP 配置
│       ├── cmp.lua       # 补全配置
│       ├── telescope.lua # 查找配置
│       ├── treesitter.lua# 语法高亮
│       ├── nvim-tree.lua # 文件树
│       └── ai.lua        # AI 补全
├── install.sh            # 安装脚本
└── README.md             # 英文文档
```

## 自定义配置

- **修改选项** → `lua/core/options.lua`
- **修改键位** → `lua/core/keymaps.lua`
- **添加插件** → `lua/plugins/init.lua`
- **修改主题** → 在 `lua/plugins/init.lua` 中修改 colorscheme

## 快捷键速查卡

```
┌────────────────────────────────────────────────┐
│  文件操作                                       │
│  <Space>e     文件树    <Space>ff    查找文件  │
│  <Space>fs    搜索      <Space>fr    最近文件  │
├────────────────────────────────────────────────┤
│  编辑                                           │
│  jk           退出插入  <Space>w     保存      │
│  gcc          注释      u            撤销      │
├────────────────────────────────────────────────┤
│  导航                                           │
│  <C-h/j/k/l>  窗口导航  <S-h/l>      缓冲区    │
│  gd           跳转定义  K            显示文档  │
└────────────────────────────────────────────────┘
```

## 获取帮助

```vim
:checkhealth           # 检查配置健康状态
:help <关键词>         # 查看帮助
:Telescope help_tags   # 搜索帮助文档
```

---

**祝你使用愉快！Happy Vimming! 🚀**
